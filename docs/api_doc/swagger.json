{"openapi":"3.0.1","info":{"title":"ChatApp","description":"Real-time Chat Application with WebSockets and JWT Authentication","contact":{"name":"Gabriel Scipioni","email":"gabriel.scipioni21@gmail.com"},"version":"0.0.1"},"servers":[{"url":"http://localhost:8088/","description":"Real-time Chat Application with WebSockets and JWT Authentication"}],"security":[{"Bearer Authentication":[]}],"tags":[{"name":"Mensajes","description":"Endpoints para gestión de mensajes"},{"name":"Usuarios","description":"Endpoints para gestión de usuarios"},{"name":"Salas de Chat","description":"Endpoints para gestión de salas de chat"},{"name":"Autenticación","description":"Endpoints para registro y login de usuarios"}],"paths":{"/api/users/me":{"put":{"tags":["Usuarios"],"summary":"Actualizar perfil","description":"Actualiza la información del usuario actual","operationId":"updateCurrentUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOUserDTO"}}}}}}},"/api/users/me/status":{"put":{"tags":["Usuarios"],"summary":"Actualizar estado","description":"Actualiza el estado de conexión del usuario","operationId":"updateUserStatus","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStatusDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOUserDTO"}}}}}}},"/api/messages/{id}":{"get":{"tags":["Mensajes"],"summary":"Obtener mensaje por ID","description":"Obtiene información de un mensaje específico","operationId":"getMessageById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOMessageDTO"}}}}}},"put":{"tags":["Mensajes"],"summary":"Editar mensaje","description":"Edita el contenido de un mensaje (solo el autor)","operationId":"editMessage","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageEditDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOMessageDTO"}}}}}},"delete":{"tags":["Mensajes"],"summary":"Eliminar mensaje","description":"Elimina un mensaje (solo el autor)","operationId":"deleteMessage","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOVoid"}}}}}}},"/api/chatrooms/{id}":{"get":{"tags":["Salas de Chat"],"summary":"Obtener sala por ID","description":"Obtiene información de una sala específica","operationId":"getChatRoomById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}},"put":{"tags":["Salas de Chat"],"summary":"Actualizar sala","description":"Actualiza la información de una sala grupal","operationId":"updateChatRoom","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRoomUpdateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}},"delete":{"tags":["Salas de Chat"],"summary":"Eliminar sala","description":"Elimina una sala grupal (solo creador)","operationId":"deleteChatRoom","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOVoid"}}}}}}},"/api/messages":{"post":{"tags":["Mensajes"],"summary":"Enviar mensaje","description":"Envía un nuevo mensaje a una sala de chat","operationId":"sendMessage","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageSendDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOMessageDTO"}}}}}}},"/api/chatrooms/{id}/participants/{userId}":{"post":{"tags":["Salas de Chat"],"summary":"Agregar participante","description":"Agrega un usuario a una sala grupal","operationId":"addParticipant","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}},"delete":{"tags":["Salas de Chat"],"summary":"Remover participante","description":"Remueve un usuario de una sala grupal","operationId":"removeParticipant","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}}},"/api/chatrooms/{id}/leave":{"post":{"tags":["Salas de Chat"],"summary":"Abandonar sala","description":"El usuario actual abandona una sala de chat","operationId":"leaveChatRoom","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOVoid"}}}}}}},"/api/chatrooms/private":{"post":{"tags":["Salas de Chat"],"summary":"Crear/obtener chat privado","description":"Crea o recupera una sala de chat privada entre dos usuarios","operationId":"createOrGetPrivateChatRoom","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivateChatRoomCreateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}}},"/api/chatrooms/group":{"post":{"tags":["Salas de Chat"],"summary":"Crear sala grupal","description":"Crea una nueva sala de chat grupal","operationId":"createGroupChatRoom","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRoomCreateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOChatRoomDTO"}}}}}}},"/api/auth/register":{"post":{"tags":["Autenticación"],"summary":"Registrar usuario","description":"Registra un nuevo usuario en el sistema","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegistrationDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOAuthResponseDTO"}}}}}}},"/api/auth/logout":{"post":{"tags":["Autenticación"],"summary":"Cerrar sesión","description":"Cierra la sesión del usuario actual","operationId":"logout","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOVoid"}}}}}}},"/api/auth/login":{"post":{"tags":["Autenticación"],"summary":"Iniciar sesión","description":"Autentica un usuario y retorna un token JWT","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOAuthResponseDTO"}}}}}}},"/api/users":{"get":{"tags":["Usuarios"],"summary":"Listar usuarios","description":"Obtiene la lista de todos los usuarios excepto el actual","operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListUserDTO"}}}}}}},"/api/users/{id}":{"get":{"tags":["Usuarios"],"summary":"Obtener usuario por ID","description":"Obtiene información de un usuario específico","operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOUserDTO"}}}}}}},"/api/users/search":{"get":{"tags":["Usuarios"],"summary":"Buscar usuarios","description":"Busca usuarios por username","operationId":"searchUsers","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListUserDTO"}}}}}}},"/api/users/online":{"get":{"tags":["Usuarios"],"summary":"Usuarios online","description":"Obtiene la lista de usuarios conectados","operationId":"getOnlineUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListUserDTO"}}}}}}},"/api/messages/chatroom/{chatRoomId}":{"get":{"tags":["Mensajes"],"summary":"Obtener mensajes","description":"Obtiene mensajes de una sala con paginación","operationId":"getMessagesByChatRoom","parameters":[{"name":"chatRoomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":50}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOPageMessageDTO"}}}}}}},"/api/messages/chatroom/{chatRoomId}/search":{"get":{"tags":["Mensajes"],"summary":"Buscar mensajes","description":"Busca mensajes por contenido en una sala","operationId":"searchMessages","parameters":[{"name":"chatRoomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"query","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListMessageDTO"}}}}}}},"/api/messages/chatroom/{chatRoomId}/recent":{"get":{"tags":["Mensajes"],"summary":"Últimos mensajes","description":"Obtiene los últimos N mensajes de una sala","operationId":"getLastMessages","parameters":[{"name":"chatRoomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":50}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListMessageDTO"}}}}}}},"/api/messages/chatroom/{chatRoomId}/count":{"get":{"tags":["Mensajes"],"summary":"Contar mensajes","description":"Obtiene el número total de mensajes en una sala","operationId":"getMessageCount","parameters":[{"name":"chatRoomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOLong"}}}}}}},"/api/chatrooms":{"get":{"tags":["Salas de Chat"],"summary":"Listar salas","description":"Obtiene todas las salas de chat del usuario actual","operationId":"getCurrentUserChatRooms","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListChatRoomDTO"}}}}}}},"/api/chatrooms/search":{"get":{"tags":["Salas de Chat"],"summary":"Buscar salas","description":"Busca salas de chat por nombre","operationId":"searchChatRooms","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOListChatRoomDTO"}}}}}}},"/api/auth/me":{"get":{"tags":["Autenticación"],"summary":"Usuario actual","description":"Obtiene información del usuario autenticado","operationId":"getCurrentUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDTOUserDTO"}}}}}}}},"components":{"schemas":{"UserUpdateDTO":{"type":"object","properties":{"email":{"maxLength":100,"minLength":0,"type":"string"},"fullName":{"maxLength":100,"minLength":0,"type":"string"},"avatarUrl":{"maxLength":500,"minLength":0,"type":"string"}}},"ApiResponseDTOUserDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/UserDTO"},"timestamp":{"type":"string","format":"date-time"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"avatarUrl":{"type":"string"},"status":{"type":"string","enum":["ONLINE","OFFLINE","AWAY","BUSY"]},"enabled":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"lastSeenAt":{"type":"string","format":"date-time"}}},"UserStatusDTO":{"required":["status"],"type":"object","properties":{"status":{"type":"string","enum":["ONLINE","OFFLINE","AWAY","BUSY"]}}},"MessageEditDTO":{"required":["content"],"type":"object","properties":{"content":{"maxLength":5000,"minLength":0,"type":"string"}}},"ApiResponseDTOMessageDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/MessageDTO"},"timestamp":{"type":"string","format":"date-time"}}},"MessageDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"content":{"type":"string"},"type":{"type":"string","enum":["CHAT","JOIN","LEAVE","SYSTEM","FILE","IMAGE"]},"sentAt":{"type":"string","format":"date-time"},"editedAt":{"type":"string","format":"date-time"},"isEdited":{"type":"boolean"},"sender":{"$ref":"#/components/schemas/UserDTO"},"chatRoomId":{"type":"integer","format":"int64"}}},"ChatRoomUpdateDTO":{"type":"object","properties":{"name":{"maxLength":100,"minLength":3,"type":"string"},"description":{"maxLength":500,"minLength":0,"type":"string"},"imageUrl":{"maxLength":500,"minLength":0,"type":"string"}}},"ApiResponseDTOChatRoomDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ChatRoomDTO"},"timestamp":{"type":"string","format":"date-time"}}},"ChatRoomDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"type":{"type":"string","enum":["PRIVATE","GROUP"]},"description":{"type":"string"},"imageUrl":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"createdBy":{"$ref":"#/components/schemas/UserDTO"},"participants":{"type":"array","items":{"$ref":"#/components/schemas/UserDTO"}},"lastMessage":{"$ref":"#/components/schemas/MessageDTO"},"participantCount":{"type":"integer","format":"int32"},"unreadCount":{"type":"integer","format":"int64"}}},"MessageSendDTO":{"required":["chatRoomId","content"],"type":"object","properties":{"chatRoomId":{"type":"integer","format":"int64"},"content":{"maxLength":5000,"minLength":0,"type":"string"},"type":{"type":"string","enum":["CHAT","JOIN","LEAVE","SYSTEM","FILE","IMAGE"]}}},"ApiResponseDTOVoid":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object"},"timestamp":{"type":"string","format":"date-time"}}},"PrivateChatRoomCreateDTO":{"required":["recipientId"],"type":"object","properties":{"recipientId":{"type":"integer","format":"int64"}}},"ChatRoomCreateDTO":{"required":["name","type"],"type":"object","properties":{"name":{"maxLength":100,"minLength":3,"type":"string"},"type":{"type":"string","enum":["PRIVATE","GROUP"]},"description":{"maxLength":500,"minLength":0,"type":"string"},"imageUrl":{"maxLength":500,"minLength":0,"type":"string"},"participantIds":{"type":"array","items":{"type":"integer","format":"int64"}}}},"UserRegistrationDTO":{"required":["email","password","username"],"type":"object","properties":{"username":{"maxLength":50,"minLength":3,"type":"string"},"email":{"maxLength":100,"minLength":0,"type":"string"},"password":{"maxLength":100,"minLength":6,"type":"string"},"fullName":{"maxLength":100,"minLength":0,"type":"string"}}},"ApiResponseDTOAuthResponseDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/AuthResponseDTO"},"timestamp":{"type":"string","format":"date-time"}}},"AuthResponseDTO":{"type":"object","properties":{"token":{"type":"string"},"tokenType":{"type":"string"},"user":{"$ref":"#/components/schemas/UserDTO"}}},"UserLoginDTO":{"required":["password","usernameOrEmail"],"type":"object","properties":{"usernameOrEmail":{"type":"string"},"password":{"type":"string"}}},"ApiResponseDTOListUserDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/UserDTO"}},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseDTOPageMessageDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/PageMessageDTO"},"timestamp":{"type":"string","format":"date-time"}}},"PageMessageDTO":{"type":"object","properties":{"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"last":{"type":"boolean"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"ApiResponseDTOListMessageDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseDTOLong":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"integer","format":"int64"},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseDTOListChatRoomDTO":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/ChatRoomDTO"}},"timestamp":{"type":"string","format":"date-time"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"Introduce el token JWT (sin el prefijo 'Bearer')","name":"Bearer Authentication","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}